(function() {
  var $, BLANK_HASH, BlameLineComponent, HASH_LENGTH, RP, React, Reactionary, a, div, errorController, formatDate, getDefaultDate, moment, renderLoading, span, _defaultDate;

  $ = require('atom-space-pen-views').$;

  React = require('react-atom-fork');

  Reactionary = require('reactionary-atom-fork');

  div = Reactionary.div, span = Reactionary.span, a = Reactionary.a;

  RP = React.PropTypes;

  moment = require('moment');

  formatDate = require('../util/blameFormatter').formatDate;

  errorController = require('../controllers/errorController');

  HASH_LENGTH = 7;

  BLANK_HASH = '-'.repeat(HASH_LENGTH);

  _defaultDate = null;

  getDefaultDate = function() {
    return _defaultDate != null ? _defaultDate : _defaultDate = formatDate(moment("2014-01-01T13:37:00 Z"));
  };

  renderLoading = function() {
    return div({
      className: 'blame-line loading'
    }, span({
      className: 'hash'
    }, BLANK_HASH), span({
      className: 'date'
    }, getDefaultDate()), span({
      className: 'committer'
    }, 'Loading'));
  };

  BlameLineComponent = React.createClass({
    propTypes: {
      date: RP.string.isRequired,
      hash: RP.string.isRequired,
      remoteRevision: RP.object,
      author: RP.string.isRequired,
      committer: RP.string.isRequired,
      committerDate: RP.string.isRequired,
      summary: RP.string.isRequired,
      backgroundClass: RP.string,
      noCommit: RP.bool,
      showOnlyLastNames: RP.bool.isRequired
    },
    render: function() {
      var url;
      if (this.props.noCommit) {
        return div({
          className: 'blame-line no-commit text-subtle'
        }, span({
          className: 'hash'
        }, BLANK_HASH), span({
          className: 'date'
        }, this.props.date), span({
          className: 'committer'
        }, 'Nobody'));
      } else {
        return div({
          className: 'blame-line ' + this.props.backgroundClass
        }, !this.props.remoteRevision ? a({
          onClick: this.didClickHashWithoutUrl,
          className: 'hash'
        }, this.props.hash.substring(0, HASH_LENGTH)) : (url = this.props.remoteRevision.url(this.props.hash), a({
          href: url,
          target: '_blank',
          className: 'hash'
        }, this.props.hash.substring(0, HASH_LENGTH))), span({
          className: 'date'
        }, this.props.date), span({
          className: 'committer text-highlight'
        }, this.props.showOnlyLastNames ? this.props.author.split(' ').slice(-1)[0] : this.props.author));
      }
    },
    componentDidMount: function() {
      var $el;
      $el = $(this.getDOMNode());
      if (this.props.summary) {
        return atom.tooltips.add($el, {
          title: this.props.summary,
          placement: "auto left"
        });
      }
    },
    componentWillUnmount: function() {
      return $(this.getDOMNode()).tooltip("destroy");
    },
    shouldComponentUpdate: function(_arg) {
      var hash, showOnlyLastNames;
      hash = _arg.hash, showOnlyLastNames = _arg.showOnlyLastNames;
      return hash !== this.props.hash || showOnlyLastNames !== this.props.showOnlyLastNames;
    },
    didClickHashWithoutUrl: function(event, element) {
      return errorController.showError('error-no-custom-url-specified');
    }
  });

  module.exports = {
    BlameLineComponent: BlameLineComponent,
    renderLoading: renderLoading
  };

}).call(this);

//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAiZmlsZSI6ICIiLAogICJzb3VyY2VSb290IjogIiIsCiAgInNvdXJjZXMiOiBbCiAgICAiL1VzZXJzL2tzd2VkYmVyZy8uYXRvbS9wYWNrYWdlcy9naXQtYmxhbWUvbGliL3ZpZXdzL2JsYW1lLWxpbmUtdmlldy5jb2ZmZWUiCiAgXSwKICAibmFtZXMiOiBbXSwKICAibWFwcGluZ3MiOiAiQUFBQTtBQUFBLE1BQUEsc0tBQUE7O0FBQUEsRUFBQyxJQUFLLE9BQUEsQ0FBUSxzQkFBUixFQUFMLENBQUQsQ0FBQTs7QUFBQSxFQUNBLEtBQUEsR0FBUSxPQUFBLENBQVEsaUJBQVIsQ0FEUixDQUFBOztBQUFBLEVBRUEsV0FBQSxHQUFjLE9BQUEsQ0FBUSx1QkFBUixDQUZkLENBQUE7O0FBQUEsRUFHQyxrQkFBQSxHQUFELEVBQU0sbUJBQUEsSUFBTixFQUFZLGdCQUFBLENBSFosQ0FBQTs7QUFBQSxFQUlBLEVBQUEsR0FBSyxLQUFLLENBQUMsU0FKWCxDQUFBOztBQUFBLEVBS0EsTUFBQSxHQUFTLE9BQUEsQ0FBUSxRQUFSLENBTFQsQ0FBQTs7QUFBQSxFQU1DLGFBQWMsT0FBQSxDQUFRLHdCQUFSLEVBQWQsVUFORCxDQUFBOztBQUFBLEVBT0EsZUFBQSxHQUFrQixPQUFBLENBQVEsZ0NBQVIsQ0FQbEIsQ0FBQTs7QUFBQSxFQVNBLFdBQUEsR0FBYyxDQVRkLENBQUE7O0FBQUEsRUFVQSxVQUFBLEdBQWEsR0FBRyxDQUFDLE1BQUosQ0FBVyxXQUFYLENBVmIsQ0FBQTs7QUFBQSxFQVlBLFlBQUEsR0FBZSxJQVpmLENBQUE7O0FBQUEsRUFhQSxjQUFBLEdBQWlCLFNBQUEsR0FBQTtrQ0FDZixlQUFBLGVBQWdCLFVBQUEsQ0FBVyxNQUFBLENBQU8sdUJBQVAsQ0FBWCxFQUREO0VBQUEsQ0FiakIsQ0FBQTs7QUFBQSxFQWlCQSxhQUFBLEdBQWdCLFNBQUEsR0FBQTtXQUNkLEdBQUEsQ0FBSTtBQUFBLE1BQUEsU0FBQSxFQUFXLG9CQUFYO0tBQUosRUFDRSxJQUFBLENBQUs7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

//# sourceURL=/Users/kswedberg/.atom/packages/git-blame/lib/views/blame-line-view.coffee
