(function() {
  module.exports = {
    activate: function(state) {
      return atom.commands.add('atom-workspace', {
        'wrap-in-tag:wrap': (function(_this) {
          return function() {
            return _this.wrap();
          };
        })(this)
      });
    },
    wrap: function() {
      var editor, newEndTagSelectRange, newStartTagSelectRange, newText, range, selection, tag, tagRangePos;
      tag = 'p';
      if (editor = atom.workspace.getActiveTextEditor()) {
        selection = editor.getSelectedText();
        tagRangePos = editor.getSelectedBufferRange();
        newText = ['<', tag, '>', selection, '</', tag, '>'].join('');
        range = {
          start: {
            from: [tagRangePos.start.row, tagRangePos.start.column + 1],
            to: [tagRangePos.start.row, tagRangePos.start.column + 2]
          },
          end: {
            from: [tagRangePos.end.row, tagRangePos.end.column + 5],
            to: [tagRangePos.end.row, tagRangePos.end.column + 6]
          }
        };
        if (range.end.from[0] > range.start.from[0]) {
          range.end.from[1] = range.end.from[1] - 3;
          range.end.to[1] = range.end.to[1] - 3;
        }
        newStartTagSelectRange = [range.start.from, range.start.to];
        newEndTagSelectRange = [range.end.from, range.end.to];
        editor.setCursorBufferPosition([tagRangePos.start.row, tagRangePos.start.column + 1]);
        editor.addSelectionForBufferRange(newStartTagSelectRange);
        return editor.addSelectionForBufferRange(newEndTagSelectRange);
      }
    }
  };

}).call(this);

//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAiZmlsZSI6ICIiLAogICJzb3VyY2VSb290IjogIiIsCiAgInNvdXJjZXMiOiBbCiAgICAiL1VzZXJzL2tzd2VkYmVyZy9naXRodWIvYXRvbS13cmFwLWluLXRhZy9saWIvd3JhcC1pbi10YWcuY29mZmVlIgogIF0sCiAgIm5hbWVzIjogW10sCiAgIm1hcHBpbmdzIjogIkFBQUE7QUFBQSxFQUFBLE1BQU0sQ0FBQyxPQUFQLEdBRUU7QUFBQSxJQUFBLFFBQUEsRUFBVSxTQUFDLEtBQUQsR0FBQTthQUVSLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBZCxDQUFrQixnQkFBbEIsRUFBb0M7QUFBQSxRQUFBLGtCQUFBLEVBQW9CLENBQUEsU0FBQSxLQUFBLEdBQUE7aUJBQUEsU0FBQSxHQUFBO21CQUFHLEtBQUMsQ0FBQSxJQUFELENBQUEsRUFBSDtVQUFBLEVBQUE7UUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQXBCO09BQXBDLEVBRlE7SUFBQSxDQUFWO0FBQUEsSUFJQSxJQUFBLEVBQU0sU0FBQSxHQUFBO0FBRUosVUFBQSxpR0FBQTtBQUFBLE1BQUEsR0FBQSxHQUFNLEdBQU4sQ0FBQTtBQUVBLE1BQUEsSUFBRyxNQUFBLEdBQVMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxtQkFBZixDQUFBLENBQVo7QUFDRSxRQUFBLFNBQUEsR0FBWSxNQUFNLENBQUMsZUFBUCxDQUFBLENBQVosQ0FBQTtBQUFBLFFBQ0EsV0FBQSxHQUFjLE1BQU0sQ0FBQyxzQkFBUCxDQUFBLENBRGQsQ0FBQTtBQUFBLFFBR0EsT0FBQSxHQUFVLENBQUMsR0FBRCxFQUFNLEdBQU4sRUFBVyxHQUFYLEVBQWdCLFNBQWhCLEVBQTJCLElBQTNCLEVBQWlDLEdBQWpDLEVBQXNDLEdBQXRDLENBQTBDLENBQUMsSUFBM0MsQ0FBZ0QsRUFBaEQsQ0FIVixDQUFBO0FBQUEsUUFLQSxLQUFBLEdBQ0U7QUFBQSxVQUFBLEtBQUEsRUFDRTtBQUFBLFlBQUEsSUFBQSxFQUFNLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxHQUFuQixFQUF3QixXQUFXLENBQUMsS0FBSyxDQUFDLE1BQWxCLEdBQXlCLENBQWpELENBQU47QUFBQSxZQUNBLEVBQUEsRUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsR0FBbkIsRUFBd0IsV0FBVyxDQUFDLEtBQUssQ0FBQyxNQUFsQixHQUF5QixDQUFqRCxDQURKO1dBREY7QUFBQSxVQUdBLEdBQUEsRUFDRTtBQUFBLFlBQUEsSUFBQSxFQUFNLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxHQUFqQixFQUFzQixXQUFXLENBQUMsR0FBRyxDQUFDLE1BQWhCLEdBQXVCLENBQTdDLENBQU47QUFBQSxZQUNBLEVBQUEsRUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsR0FBakIsRUFBc0IsV0FBVyxDQUFDLEdBQUcsQ0FBQyxNQUFoQixHQUF1QixDQUE3QyxDQURKO1dBSkY7U0FORixDQUFBO0FBYUEsUUFBQSxJQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSyxDQUFBLENBQUEsQ0FBZixHQUFvQixLQUFLLENBQUMsS0FBSyxDQUFDLElBQUssQ0FBQSxDQUFBLENBQXhDO0FBQ0UsVUFBQSxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUssQ0FBQSxDQUFBLENBQWYsR0FBb0IsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFLLENBQUEsQ0FBQSxDQUFmLEdBQW9CLENBQXhDLENBQUE7QUFBQSxVQUNBLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBRyxDQUFBLENBQUEsQ0FBYixHQUFrQixLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUcsQ0FBQSxDQUFBLENBQWIsR0FBa0IsQ0FEcEMsQ0FERjtTQWJBO0FBQUEsUUFpQkEsc0JBQUEsR0FBeUIsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLElBQWIsRUFBbUIsS0FBSyxDQUFDLEtBQUssQ0FBQyxFQUEvQixDQWpCekIsQ0FBQTtBQUFBLFFBa0JBLG9CQUFBLEdBQXVCLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFYLEVBQWlCLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBM0IsQ0FsQnZCLENBQUE7QUFBQSxRQXFCQSxNQUFNLENBQUMsdUJBQVAsQ0FBK0IsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLEdBQW5CLEVBQXdCLFdBQVcsQ0FBQyxLQUFLLENBQUMsTUFBbEIsR0FBeUIsQ0FBakQsQ0FBL0IsQ0FyQkEsQ0FBQTtBQUFBLFFBc0JBLE1BQU0sQ0FBQywwQkFBUCxDQUFrQyxzQkFBbEMsQ0F0QkEsQ0FBQTtlQXVCQSxNQUFNLENBQUMsMEJBQVAsQ0FBa0Msb0JBQWxDLEVBeEJGO09BSkk7SUFBQSxDQUpOO0dBRkYsQ0FBQTtBQUFBIgp9

//# sourceURL=/Users/kswedberg/github/atom-wrap-in-tag/lib/wrap-in-tag.coffee
