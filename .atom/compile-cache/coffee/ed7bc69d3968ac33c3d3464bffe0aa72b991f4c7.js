(function() {
  module.exports = {
    activate: function(state) {
      return atom.commands.add('atom-workspace', {
        'wrap-in-tag:wrap': (function(_this) {
          return function() {
            return _this.wrap();
          };
        })(this)
      });
    },
    wrap: function() {
      var editor, newEndTagSelectRange, newStartTagSelectRange, newText, range, selection, tag, tagRangePos;
      tag = 'p';
      if (editor = atom.workspace.getActiveTextEditor()) {
        selection = editor.getSelectedText();
        tagRangePos = editor.getSelectedBufferRange();
        newText = ['<', tag, '>', selection, '</', tag, '>'].join('');
        range = {
          start: {
            from: [tagRangePos.start.row, tagRangePos.start.column + 1],
            to: [tagRangePos.start.row, tagRangePos.start.column + 2]
          },
          end: {
            from: [tagRangePos.end.row, tagRangePos.end.column + 5],
            to: [tagRangePos.end.row, tagRangePos.end.column + 6]
          }
        };
        if (range.end.from[0] > range.start.from[0]) {
          range.end.from[1] = range.end.from[1] - 3;
          range.end.to[1] = range.end.to[1] - 3;
        }
        newStartTagSelectRange = [range.start.from, range.start.to];
        newEndTagSelectRange = [range.end.from, range.end.to];
        editor.insertText(newText);
        editor.setCursorBufferPosition([tagRangePos.start.row, tagRangePos.start.column + 1]);
        editor.addSelectionForBufferRange(newStartTagSelectRange);
        return editor.addSelectionForBufferRange(newEndTagSelectRange);
      }
    }
  };

}).call(this);

//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAiZmlsZSI6ICIiLAogICJzb3VyY2VSb290IjogIiIsCiAgInNvdXJjZXMiOiBbCiAgICAiL1VzZXJzL2tzd2VkYmVyZy8uYXRvbS9wYWNrYWdlcy9hdG9tLXdyYXAtaW4tdGFnL2xpYi93cmFwLWluLXRhZy5jb2ZmZWUiCiAgXSwKICAibmFtZXMiOiBbXSwKICAibWFwcGluZ3MiOiAiQUFBQTtBQUFBLEVBQUEsTUFBTSxDQUFDLE9BQVAsR0FFRTtBQUFBLElBQUEsUUFBQSxFQUFVLFNBQUMsS0FBRCxHQUFBO2FBRVIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFkLENBQWtCLGdCQUFsQixFQUFvQztBQUFBLFFBQUEsa0JBQUEsRUFBb0IsQ0FBQSxTQUFBLEtBQUEsR0FBQTtpQkFBQSxTQUFBLEdBQUE7bUJBQUcsS0FBQyxDQUFBLElBQUQsQ0FBQSxFQUFIO1VBQUEsRUFBQTtRQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBcEI7T0FBcEMsRUFGUTtJQUFBLENBQVY7QUFBQSxJQUlBLElBQUEsRUFBTSxTQUFBLEdBQUE7QUFFSixVQUFBLGlHQUFBO0FBQUEsTUFBQSxHQUFBLEdBQU0sR0FBTixDQUFBO0FBRUEsTUFBQSxJQUFHLE1BQUEsR0FBUyxJQUFJLENBQUMsU0FBUyxDQUFDLG1CQUFmLENBQUEsQ0FBWjtBQUNFLFFBQUEsU0FBQSxHQUFZLE1BQU0sQ0FBQyxlQUFQLENBQUEsQ0FBWixDQUFBO0FBQUEsUUFDQSxXQUFBLEdBQWMsTUFBTSxDQUFDLHNCQUFQLENBQUEsQ0FEZCxDQUFBO0FBQUEsUUFHQSxPQUFBLEdBQVUsQ0FBQyxHQUFELEVBQU0sR0FBTixFQUFXLEdBQVgsRUFBZ0IsU0FBaEIsRUFBMkIsSUFBM0IsRUFBaUMsR0FBakMsRUFBc0MsR0FBdEMsQ0FBMEMsQ0FBQyxJQUEzQyxDQUFnRCxFQUFoRCxDQUhWLENBQUE7QUFBQSxRQUtBLEtBQUEsR0FDRTtBQUFBLFVBQUEsS0FBQSxFQUNFO0FBQUEsWUFBQSxJQUFBLEVBQU0sQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLEdBQW5CLEVBQXdCLFdBQVcsQ0FBQyxLQUFLLENBQUMsTUFBbEIsR0FBeUIsQ0FBakQsQ0FBTjtBQUFBLFlBQ0EsRUFBQSxFQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxHQUFuQixFQUF3QixXQUFXLENBQUMsS0FBSyxDQUFDLE1BQWxCLEdBQXlCLENBQWpELENBREo7V0FERjtBQUFBLFVBR0EsR0FBQSxFQUNFO0FBQUEsWUFBQSxJQUFBLEVBQU0sQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLEdBQWpCLEVBQXNCLFdBQVcsQ0FBQyxHQUFHLENBQUMsTUFBaEIsR0FBdUIsQ0FBN0MsQ0FBTjtBQUFBLFlBQ0EsRUFBQSxFQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxHQUFqQixFQUFzQixXQUFXLENBQUMsR0FBRyxDQUFDLE1BQWhCLEdBQXVCLENBQTdDLENBREo7V0FKRjtTQU5GLENBQUE7QUFhQSxRQUFBLElBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFLLENBQUEsQ0FBQSxDQUFmLEdBQW9CLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSyxDQUFBLENBQUEsQ0FBeEM7QUFDRSxVQUFBLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSyxDQUFBLENBQUEsQ0FBZixHQUFvQixLQUFLLENBQUMsR0FBRyxDQUFDLElBQUssQ0FBQSxDQUFBLENBQWYsR0FBb0IsQ0FBeEMsQ0FBQTtBQUFBLFVBQ0EsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFHLENBQUEsQ0FBQSxDQUFiLEdBQWtCLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBRyxDQUFBLENBQUEsQ0FBYixHQUFrQixDQURwQyxDQURGO1NBYkE7QUFBQSxRQWlCQSxzQkFBQSxHQUF5QixDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBYixFQUFtQixLQUFLLENBQUMsS0FBSyxDQUFDLEVBQS9CLENBakJ6QixDQUFBO0FBQUEsUUFrQkEsb0JBQUEsR0FBdUIsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQVgsRUFBaUIsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUEzQixDQWxCdkIsQ0FBQTtBQUFBLFFBb0JBLE1BQU0sQ0FBQyxVQUFQLENBQWtCLE9BQWxCLENBcEJBLENBQUE7QUFBQSxRQXFCQSxNQUFNLENBQUMsdUJBQVAsQ0FBK0IsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLEdBQW5CLEVBQXdCLFdBQVcsQ0FBQyxLQUFLLENBQUMsTUFBbEIsR0FBeUIsQ0FBakQsQ0FBL0IsQ0FyQkEsQ0FBQTtBQUFBLFFBc0JBLE1BQU0sQ0FBQywwQkFBUCxDQUFrQyxzQkFBbEMsQ0F0QkEsQ0FBQTtlQXVCQSxNQUFNLENBQUMsMEJBQVAsQ0FBa0Msb0JBQWxDLEVBeEJGO09BSkk7SUFBQSxDQUpOO0dBRkYsQ0FBQTtBQUFBIgp9

//# sourceURL=/Users/kswedberg/.atom/packages/atom-wrap-in-tag/lib/wrap-in-tag.coffee
