Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.activate = activate;
exports.serialize = serialize;
exports.provide = provide;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _autosuggestAutoSuggestProviderJs = require('./autosuggest/AutoSuggestProvider.js');

var _autosuggestAutoSuggestProviderJs2 = _interopRequireDefault(_autosuggestAutoSuggestProviderJs);

var _exportindexExportIndexJs = require('./exportindex/ExportIndex.js');

var _exportindexExportIndexJs2 = _interopRequireDefault(_exportindexExportIndexJs);

var _importsImportOrganiserJs = require('./imports/ImportOrganiser.js');

var _importsImportOrganiserJs2 = _interopRequireDefault(_importsImportOrganiserJs);

var _importsImportRepositoryJs = require('./imports/ImportRepository.js');

var _importsImportRepositoryJs2 = _interopRequireDefault(_importsImportRepositoryJs);

'use babel';

var exportIndex = new _exportindexExportIndexJs2['default']();
var importOrganiser = new _importsImportOrganiserJs2['default']();
var importRepository = new _importsImportRepositoryJs2['default'](importOrganiser);
var autoSuggestProvider = new _autosuggestAutoSuggestProviderJs2['default'](exportIndex, importRepository);

function onChangeActivePane(pane) {
  // If new active pane has buffer, it's TextEditor and we should observeChanges
  // otherwise dispose any observation
  if (pane && pane.getBuffer) {
    importOrganiser.setEditor(pane);
    importRepository.observeChanges(pane);
    exportIndex.observeChanges(pane);
  } else {
    importRepository.disposeIfNecessary();
    exportIndex.disposeIfNecessary();
  }
}

function activate() {
  exportIndex.buildIndex();
  importRepository.registerChange(importOrganiser.organiseImports.bind(importOrganiser));

  onChangeActivePane(atom.workspace.getActivePaneItem());
  atom.workspace.onDidChangeActivePaneItem(onChangeActivePane);
}

function serialize() {
  // TODO: we might want to implement this
}

function provide() {
  return autoSuggestProvider;
}

var config = {
  ignoredFolders: {
    type: 'array',
    'default': ['node_modules', 'test', 'bin', 'dist']
  },
  allowedSuffixes: {
    type: 'array',
    'default': ['.js', '.jsx']
  },
  trailingSemicolon: {
    type: 'boolean',
    'default': false
  },
  spaceForNamedImports: {
    type: 'boolean',
    'default': true
  }
};
exports.config = config;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9rc3dlZGJlcmcvLmF0b20vcGFja2FnZXMvanMtYXV0b2ltcG9ydC9saWIvbWFpbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Z0RBRWdDLHNDQUFzQzs7Ozt3Q0FDOUMsOEJBQThCOzs7O3dDQUMxQiw4QkFBOEI7Ozs7eUNBQzdCLCtCQUErQjs7OztBQUw1RCxXQUFXLENBQUM7O0FBT1osSUFBTSxXQUFXLEdBQUcsMkNBQWlCLENBQUM7QUFDdEMsSUFBTSxlQUFlLEdBQUcsMkNBQXFCLENBQUM7QUFDOUMsSUFBTSxnQkFBZ0IsR0FBRywyQ0FBcUIsZUFBZSxDQUFDLENBQUM7QUFDL0QsSUFBTSxtQkFBbUIsR0FBRyxrREFBd0IsV0FBVyxFQUFFLGdCQUFnQixDQUFDLENBQUM7O0FBRW5GLFNBQVMsa0JBQWtCLENBQUMsSUFBSSxFQUFFOzs7QUFHaEMsTUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRTtBQUMxQixtQkFBZSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNoQyxvQkFBZ0IsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDdEMsZUFBVyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQztHQUNsQyxNQUFNO0FBQ0wsb0JBQWdCLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztBQUN0QyxlQUFXLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztHQUNsQztDQUNGOztBQUVNLFNBQVMsUUFBUSxHQUFHO0FBQ3pCLGFBQVcsQ0FBQyxVQUFVLEVBQUUsQ0FBQztBQUN6QixrQkFBZ0IsQ0FBQyxjQUFjLENBQUMsZUFBZSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQzs7QUFFdkYsb0JBQWtCLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7QUFDdkQsTUFBSSxDQUFDLFNBQVMsQ0FBQyx5QkFBeUIsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0NBQzlEOztBQUVNLFNBQVMsU0FBUyxHQUFHOztDQUUzQjs7QUFFTSxTQUFTLE9BQU8sR0FBRztBQUN4QixTQUFPLG1CQUFtQixDQUFDO0NBQzVCOztBQUdNLElBQU0sTUFBTSxHQUFHO0FBQ3BCLGdCQUFjLEVBQUU7QUFDZCxRQUFJLEVBQUUsT0FBTztBQUNiLGVBQVMsQ0FBQyxjQUFjLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLENBQUM7R0FDakQ7QUFDRCxpQkFBZSxFQUFFO0FBQ2YsUUFBSSxFQUFFLE9BQU87QUFDYixlQUFTLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQztHQUN6QjtBQUNELG1CQUFpQixFQUFFO0FBQ2pCLFFBQUksRUFBRSxTQUFTO0FBQ2YsZUFBUyxLQUFLO0dBQ2Y7QUFDRCxzQkFBb0IsRUFBRTtBQUNwQixRQUFJLEVBQUUsU0FBUztBQUNmLGVBQVMsSUFBSTtHQUNkO0NBQ0YsQ0FBQyIsImZpbGUiOiIvVXNlcnMva3N3ZWRiZXJnLy5hdG9tL3BhY2thZ2VzL2pzLWF1dG9pbXBvcnQvbGliL21haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGJhYmVsJztcblxuaW1wb3J0IEF1dG9TdWdnZXN0UHJvdmlkZXIgZnJvbSAnLi9hdXRvc3VnZ2VzdC9BdXRvU3VnZ2VzdFByb3ZpZGVyLmpzJ1xuaW1wb3J0IEV4cG9ydEluZGV4IGZyb20gJy4vZXhwb3J0aW5kZXgvRXhwb3J0SW5kZXguanMnXG5pbXBvcnQgSW1wb3J0T3JnYW5pc2VyIGZyb20gJy4vaW1wb3J0cy9JbXBvcnRPcmdhbmlzZXIuanMnXG5pbXBvcnQgSW1wb3J0UmVwb3NpdG9yeSBmcm9tICcuL2ltcG9ydHMvSW1wb3J0UmVwb3NpdG9yeS5qcydcblxuY29uc3QgZXhwb3J0SW5kZXggPSBuZXcgRXhwb3J0SW5kZXgoKTtcbmNvbnN0IGltcG9ydE9yZ2FuaXNlciA9IG5ldyBJbXBvcnRPcmdhbmlzZXIoKTtcbmNvbnN0IGltcG9ydFJlcG9zaXRvcnkgPSBuZXcgSW1wb3J0UmVwb3NpdG9yeShpbXBvcnRPcmdhbmlzZXIpO1xuY29uc3QgYXV0b1N1Z2dlc3RQcm92aWRlciA9IG5ldyBBdXRvU3VnZ2VzdFByb3ZpZGVyKGV4cG9ydEluZGV4LCBpbXBvcnRSZXBvc2l0b3J5KTtcblxuZnVuY3Rpb24gb25DaGFuZ2VBY3RpdmVQYW5lKHBhbmUpIHtcbiAgLy8gSWYgbmV3IGFjdGl2ZSBwYW5lIGhhcyBidWZmZXIsIGl0J3MgVGV4dEVkaXRvciBhbmQgd2Ugc2hvdWxkIG9ic2VydmVDaGFuZ2VzXG4gIC8vIG90aGVyd2lzZSBkaXNwb3NlIGFueSBvYnNlcnZhdGlvblxuICBpZiAocGFuZSAmJiBwYW5lLmdldEJ1ZmZlcikge1xuICAgIGltcG9ydE9yZ2FuaXNlci5zZXRFZGl0b3IocGFuZSk7XG4gICAgaW1wb3J0UmVwb3NpdG9yeS5vYnNlcnZlQ2hhbmdlcyhwYW5lKTtcbiAgICBleHBvcnRJbmRleC5vYnNlcnZlQ2hhbmdlcyhwYW5lKTtcbiAgfSBlbHNlIHtcbiAgICBpbXBvcnRSZXBvc2l0b3J5LmRpc3Bvc2VJZk5lY2Vzc2FyeSgpO1xuICAgIGV4cG9ydEluZGV4LmRpc3Bvc2VJZk5lY2Vzc2FyeSgpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgZXhwb3J0SW5kZXguYnVpbGRJbmRleCgpO1xuICBpbXBvcnRSZXBvc2l0b3J5LnJlZ2lzdGVyQ2hhbmdlKGltcG9ydE9yZ2FuaXNlci5vcmdhbmlzZUltcG9ydHMuYmluZChpbXBvcnRPcmdhbmlzZXIpKTtcblxuICBvbkNoYW5nZUFjdGl2ZVBhbmUoYXRvbS53b3Jrc3BhY2UuZ2V0QWN0aXZlUGFuZUl0ZW0oKSk7XG4gIGF0b20ud29ya3NwYWNlLm9uRGlkQ2hhbmdlQWN0aXZlUGFuZUl0ZW0ob25DaGFuZ2VBY3RpdmVQYW5lKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZSgpIHtcbiAgLy8gVE9ETzogd2UgbWlnaHQgd2FudCB0byBpbXBsZW1lbnQgdGhpc1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJvdmlkZSgpIHtcbiAgcmV0dXJuIGF1dG9TdWdnZXN0UHJvdmlkZXI7XG59XG5cblxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgaWdub3JlZEZvbGRlcnM6IHtcbiAgICB0eXBlOiAnYXJyYXknLFxuICAgIGRlZmF1bHQ6IFsnbm9kZV9tb2R1bGVzJywgJ3Rlc3QnLCAnYmluJywgJ2Rpc3QnXVxuICB9LFxuICBhbGxvd2VkU3VmZml4ZXM6IHtcbiAgICB0eXBlOiAnYXJyYXknLFxuICAgIGRlZmF1bHQ6IFsnLmpzJywgJy5qc3gnXVxuICB9LFxuICB0cmFpbGluZ1NlbWljb2xvbjoge1xuICAgIHR5cGU6ICdib29sZWFuJyxcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9LFxuICBzcGFjZUZvck5hbWVkSW1wb3J0czoge1xuICAgIHR5cGU6ICdib29sZWFuJyxcbiAgICBkZWZhdWx0OiB0cnVlXG4gIH1cbn07XG4iXX0=
//# sourceURL=/Users/kswedberg/.atom/packages/js-autoimport/lib/main.js
